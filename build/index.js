(()=>{"use strict";var e={d:(l,o)=>{for(var a in o)e.o(o,a)&&!e.o(l,a)&&Object.defineProperty(l,a,{enumerable:!0,get:o[a]})},o:(e,l)=>Object.prototype.hasOwnProperty.call(e,l),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},l={};e.r(l),e.d(l,{ButtonControl:()=>r,ButtonGroupControl:()=>c,ContentWrapper:()=>b,HEADER_HEADING_LEVELS:()=>u,HEADING_HIGHER_LEVELS:()=>M,HEADING_LEVELS:()=>V,HEADING_STYLES:()=>h,HeaderControl:()=>_,HeaderControlEdit:()=>g,HeadingLevelControl:()=>z,MediaControl:()=>x,MediaControlEdit:()=>T,PriceControl:()=>N,PriceControlEdit:()=>E,SelectPostsControl:()=>B,VARIANTS:()=>m,buttonDefault:()=>s,buttonGroupDefault:()=>d,getBlockContentSerialized:()=>P,getChildBlockAttributes:()=>I,getMediaHandlers:()=>L,headerDefault:()=>v,headingLevelDefault:()=>G,imageDefault:()=>k,priceDefault:()=>S});const o=window.React,a=window.wp.components,t=window.wp.i18n,n=window.wp.blockEditor,i=window.ReactJSXRuntime,r=({title:e,button:l,onChange:o})=>(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(a.PanelBody,{title:(0,t.__)(e,"brilo-blocks"),children:[(0,i.jsx)(a.TextControl,{label:(0,t.__)("Text na tlačítku","brilo-blocks"),value:l.title||"",onChange:e=>o({...l,title:e})}),(0,i.jsx)(a.BaseControl,{label:(0,t.__)("URL","brilo-blocks"),children:(0,i.jsx)(n.URLInput,{value:l.url||"",onChange:e=>o({...l,url:e})})}),(0,i.jsx)(a.ToggleControl,{label:(0,t.__)("Otevřít odkaz v novém okně","brilo-blocks"),checked:l.blank,onChange:()=>o({...l,blank:!l.blank})})]})}),s={title:"",url:"",blank:!1,modalTarget:!1,modalId:""},c=({buttons:e,onChange:l})=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r,{title:(0,t.__)("Hlavní tlačítko","brilo-blocks"),button:e.primary,onChange:o=>{l({...e,primary:o})}}),(0,i.jsx)(r,{title:(0,t.__)("Vedlejší tlačítko","brilo-blocks"),button:e.secondary,onChange:o=>{l({...e,secondary:o})}})]}),d={primary:s,secondary:s},b=({allowedBlocks:e,onChange:l})=>(0,i.jsx)("div",{className:"content-wrapper",children:(0,i.jsx)(n.InnerBlocks,{onChange:l,allowedBlocks:e,defaultBlock:[e[0],{placeholder:(0,t.__)("Přidejte obsah","brilo-blocks")}]})}),h=[{value:"h1",label:(0,t.__)("L","brilo-blocks")},{value:"h2",label:(0,t.__)("M","brilo-blocks")},{value:"h3",label:(0,t.__)("S","brilo-blocks")}],u=[{value:"1",label:(0,t.__)("H1","brilo-blocks")},{value:"2",label:(0,t.__)("H2","brilo-blocks")},{value:"3",label:(0,t.__)("H3","brilo-blocks")}],m=[{value:"center",label:(0,t.__)("Na střed","brilo-blocks")},{value:"left",label:(0,t.__)("Vlevo","brilo-blocks")}],v={overline:{title:""},heading:{title:"",level:"2",style:"h2"},perex:"",variant:m[0].value},_=({header:e,onChange:l,variant:o,removeOverline:n,removePerex:r})=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.PanelBody,{title:(0,t.__)("Nadpis","brilo-blocks"),children:[!o&&(0,i.jsx)(a.__experimentalToggleGroupControl,{label:(0,t.__)("Zarovnání","brilo-blocks"),value:e.variant||m[0].value,onChange:o=>{l({...e,variant:o})},isBlock:!0,children:m.map((e=>(0,i.jsx)(a.__experimentalToggleGroupControlOption,{value:e.value,label:e.label},e.value)))}),(0,i.jsx)(a.TextControl,{label:(0,t.__)("Nadpis","brilo-blocks"),value:e.heading.title||"",onChange:o=>l({...e,heading:{...e.heading,title:o}})}),(0,i.jsx)(a.__experimentalToggleGroupControl,{label:(0,t.__)("Vzhled nadpisu","brilo-blocks"),value:e.heading.style,onChange:o=>{l({...e,heading:{...e.heading,style:o}})},isBlock:!0,children:h.map((e=>(0,i.jsx)(a.__experimentalToggleGroupControlOption,{value:e.value,label:e.label},e.value)))}),(0,i.jsx)(a.__experimentalToggleGroupControl,{label:(0,t.__)("Level nadpisu","brilo-blocks"),value:e.heading.level,onChange:o=>{l({...e,heading:{...e.heading,level:o}})},isBlock:!0,children:u.map((e=>(0,i.jsx)(a.__experimentalToggleGroupControlOption,{value:e.value,label:e.label},e.value)))})]}),!n&&(0,i.jsx)(a.TextareaControl,{label:(0,t.__)("Perex","brilo-blocks"),value:e.perex,onChange:o=>l({...e,perex:o})}),!n&&(0,i.jsx)(a.TextControl,{label:(0,t.__)('Text "nad čarou"',"brilo-blocks"),value:e.overline.title,onChange:o=>l({...e,overline:{...e.overline,title:o}})})]});function p(e){var l,o,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e)){var t=e.length;for(l=0;l<t;l++)e[l]&&(o=p(e[l]))&&(a&&(a+=" "),a+=o)}else for(o in e)e[o]&&(a&&(a+=" "),a+=o);return a}const g=({header:e,onChange:l,variant:o,removeOverline:a,removePerex:r})=>{const s=function(){for(var e,l,o=0,a="",t=arguments.length;o<t;o++)(e=arguments[o])&&(l=p(e))&&(a&&(a+=" "),a+=l);return a}("header-control-edit",`--${o||e.variant||m[0].value}`);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:s,children:[!a&&(0,i.jsx)(n.RichText,{identifier:"overline",className:"overline",tagName:"p",value:e.overline.title,allowedFormats:[],onChange:o=>l({...e,overline:{...e.overline,title:o}}),placeholder:(0,t.__)('Text "nad čarou"',"brilo-blocks"),"data-custom-placeholder":!0}),(0,i.jsx)(n.RichText,{identifier:"title",className:"title",tagName:e.heading.style,value:e.heading.title,allowedFormats:[],onChange:o=>l({...e,heading:{...e.heading,title:o}}),placeholder:(0,t.__)("Váš nadpis","brilo-blocks"),"data-custom-placeholder":!0}),!r&&(0,i.jsx)(n.RichText,{identifier:"perex",tagName:"p",value:e.perex,allowedFormats:[],onChange:o=>l({...e,perex:o}),placeholder:(0,t.__)("Perex","brilo-blocks"),"data-custom-placeholder":!0})]})})},x=({media:e,onSelect:l,onRemove:o})=>(0,i.jsxs)("div",{className:"media-control editor-post-featured-image",children:[(0,i.jsx)(n.MediaUploadCheck,{children:(0,i.jsx)(n.MediaUpload,{onSelect:l,value:e.mediaId,allowedTypes:["image"],render:({open:l})=>(0,i.jsxs)(a.Button,{className:0===e.mediaId?"editor-post-featured-image__toggle":"editor-post-featured-image__preview",onClick:l,children:[0===e.mediaId?(0,t.__)("Vyberte obrázek","brilo-blocks"):null,e.originalSrc&&(0,i.jsx)(a.ResponsiveWrapper,{naturalWidth:300,naturalHeight:200,children:(0,i.jsx)("img",{src:e.originalSrc,alt:(0,t.__)("Vybraný obrázek","brilo-blocks")})})]})})}),0!==e.mediaId&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.MediaUploadCheck,{children:(0,i.jsx)(n.MediaUpload,{className:"media-control__change-image",onSelect:l,value:e.mediaId,allowedTypes:["image"],render:({open:e})=>(0,i.jsx)(a.Button,{onClick:e,children:(0,t.__)("Změnit obrázek","brilo-blocks")})})}),(0,i.jsx)(n.MediaUploadCheck,{children:(0,i.jsx)(a.Button,{onClick:o,isLink:!0,isDestructive:!0,children:(0,t.__)("Odstranit obrázek","brilo-blocks")})})]})]}),k={originalSrc:"",mediaId:0},C=window.wp.element,j=(0,C.forwardRef)((function({icon:e,size:l=24,...o},a){return(0,C.cloneElement)(e,{width:l,height:l,...o,ref:a})})),f=window.wp.primitives,w=(0,o.createElement)(f.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,o.createElement)(f.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"})),y=(0,o.createElement)(f.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,o.createElement)(f.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})),T=({media:e,onSelect:l,onRemove:o,width:r,label:s})=>(0,i.jsxs)("div",{className:"media-control-edit editor-post-featured-image",style:{width:`${r}px`},children:[(0,i.jsx)(n.MediaUploadCheck,{children:(0,i.jsx)(n.MediaUpload,{onSelect:l,value:e.mediaId,allowedTypes:["image"],render:({open:l})=>(0,i.jsxs)("div",{className:"media-control-edit__add",onClick:l,children:[0===e.mediaId&&(0,i.jsxs)("div",{className:"media-control-edit__placeholder",children:[(0,i.jsx)(j,{icon:w}),s||(0,t.__)("Vyberte obrázek","brilo-blocks")]}),e.originalSrc&&(0,i.jsx)("img",{src:e.originalSrc,alt:(0,t.__)("Vybraný obrázek","brilo-blocks"),width:r})]})})}),0!==e.mediaId&&(0,i.jsx)(n.MediaUploadCheck,{children:(0,i.jsx)(a.Button,{className:"media-control-edit__remove",onClick:o,isLink:!0,isDestructive:!0,children:(0,i.jsx)(j,{icon:y})})})]}),N=({price:e,onChange:l})=>(0,i.jsxs)(a.PanelBody,{title:(0,t.__)("Cena","brilo-blocks"),children:[(0,i.jsx)(a.TextControl,{label:(0,t.__)("Hlavní cena","brilo-blocks"),value:e.main.value,onChange:o=>l({...e,main:{...e.main,value:o}})}),(0,i.jsx)(a.TextControl,{label:(0,t.__)("Popisek hlavní ceny","brilo-blocks"),value:e.main.title,onChange:o=>l({...e,main:{...e.main,title:o}})}),(0,i.jsx)(a.TextControl,{label:(0,t.__)("Cena před slevou","brilo-blocks"),value:e.before.value,onChange:o=>l({...e,before:{...e.before,value:o}})}),(0,i.jsx)(a.TextControl,{label:(0,t.__)("Poznámka k ceně","brilo-blocks"),value:e.note,onChange:o=>l({...e,note:o})})]}),S={before:{value:""},main:{title:"",value:""},note:"",currency:""},E=({price:e,onChange:l})=>(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"price-control-edit",children:[(0,i.jsx)(n.RichText,{className:"price-control-edit__before",tagName:"p",value:e.before.value,allowedFormats:[],onChange:o=>l({...e,before:{...e.before,value:o}})}),(0,i.jsxs)("div",{className:"price-control-edit__main-price",children:[(0,i.jsx)(n.RichText,{className:"price-control-edit__main-title",tagName:"p",value:e.main.title,allowedFormats:[],onChange:o=>l({...e,main:{...e.main,title:o}})}),(0,i.jsx)(n.RichText,{className:"price-control-edit__main",tagName:"p",value:e.main.value,allowedFormats:[],onChange:o=>l({...e,main:{...e.main,value:o}})})]}),(0,i.jsx)(n.RichText,{className:"price-control-edit__note",tagName:"p",value:e.note,allowedFormats:[],onChange:o=>l({...e,note:o})})]})}),H=window.wp.data,B=({selectedItems:e,onChange:l,postType:n,label:r,limit:s=-1})=>{const c=(0,H.useSelect)((e=>e("core").getEntityRecords("postType",n,{per_page:-1})),[]);(0,o.useEffect)((()=>{if(c){const o=c.map((e=>e.id)),a=e.filter((e=>o.includes(e)));a.length!==e.length&&l(a)}}),[c]);const[d,b]=(0,o.useState)(""),h=c?.filter((e=>e.title.rendered.toLowerCase().includes(d.toLowerCase()))),u=h?.map((e=>e.id))||[],m=u.length>0&&u.every((l=>e.includes(l))),v=u.some((l=>e.includes(l)))&&!m;return(0,i.jsx)(a.PanelBody,{title:r,className:"select-posts-control",children:(0,i.jsxs)("div",{className:"select-posts-control__content",children:[(0,i.jsx)(a.TextControl,{placeholder:(0,t.__)("Hledat...","brilo-blocks"),value:d,onChange:e=>b(e)}),s<=0&&(0,i.jsx)(a.CheckboxControl,{className:"select-posts-control__select-all",label:(0,t.__)("Vybrat vše","brilo-blocks"),indeterminate:v,checked:m,onChange:o=>(o=>{const a=o?Array.from(new Set([...e,...u])):e.filter((e=>!u.includes(e)));l(a)})(o)}),(0,i.jsxs)("div",{className:"select-posts-control__checkbox-wrapper",children:[h&&h.map((o=>(0,i.jsx)(a.CheckboxControl,{className:"select-posts-control__checkbox",label:o.title.rendered,checked:e.includes(o.id),onChange:a=>l(((l,o)=>o&&s>0&&e.length>=s?e:o?[...e,l]:e.filter((e=>e!==l)))(o.id,a)),disabled:!e.includes(o.id)&&s>0&&e.length>=s},o.id))),s>0&&(0,i.jsx)("div",{children:`${(0,t.__)("Počet položek k vybrání:")} ${s-e.length}`})]})]})})},L=(e,l,o)=>({onSelect:o=>{l({[e]:{originalSrc:o.url,mediaId:o.id}})},onRemove:()=>{l({[e]:o})}}),R=window.wp.blocks,P=function(e,l){const a=(0,H.useSelect)((l=>{const o=l("core/block-editor").getBlocks(e);let a=(0,R.serialize)(o);return a=a.replace(/<!--[\s\S]*?-->/g,""),a}));(0,o.useEffect)((()=>{l({content:a})}),[l,a])},I=function(e,l,a="items"){const t=(0,H.useSelect)((l=>l("core/block-editor").getBlocks(e)),[e]);(0,o.useEffect)((()=>{const e=t.map((e=>e.attributes));l({[a]:e})}),[t,l,a])},V=[{value:"2",label:(0,t.__)("H2","brilo-blocks")},{value:"3",label:(0,t.__)("H3","brilo-blocks")}],M=[{value:"1",label:(0,t.__)("H1","brilo-blocks")},{value:"2",label:(0,t.__)("H2","brilo-blocks")}],G=V[1].value,z=({headingLevel:e,headingLevelLabel:l,onChange:o,higherLevel:n})=>{const r=n?M:V;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(a.__experimentalToggleGroupControl,{label:l||(0,t.__)("Level nadpisu","brilo-blocks"),value:e||V[0].value,onChange:e=>o(e),isBlock:!0,children:r.map((e=>(0,i.jsx)(a.__experimentalToggleGroupControlOption,{value:e.value,label:e.label},e.value)))})})};module.exports=l})();